# 语料库文档上传指南

本文档为语料库文档上传操作的标准化指南，详细说明了文档上传的规范流程、支持的文件格式，以及通过高级参数配置优化AI文档理解与处理效果的技术方法。

---

## 1. 上传方式说明

系统支持两种标准化的内容上传方式：本地文件上传和文本内容直接录入。

### 方式一：文件上传

文件上传为系统的主要文档导入方式，支持单个文件或批量文件的标准化上传流程。

1.  在语料库问答界面，点击右下角的“上传文档”按钮。
2.  在弹出的窗口中，您可以通过以下任一方式添加文件：
    *   **点击上传**：点击虚线框内的区域，会弹出文件选择窗口，您可以从中选择文件。
    *   **拖拽上传**：直接将电脑中的文件或文件夹拖拽到虚线框内。
3.  添加文件后，您可以在下方列表中预览即将上传的文件。
4.  点击右下角的“上传”按钮开始上传流程。

### 方式二：文本上传

如果您想快速将一段文字、一篇文章或一份没有格式的文档存入语料库，可以使用文本上传功能。

1.  在上传窗口中，切换到“文本”标签页。
2.  在“标题”输入框中，为您的文本内容起一个名字。这个标题将作为该文档在语料库中的**文件名**（例如 `会议纪要-20240709.txt`）。
3.  在下方的编辑器中，撰写或粘贴您的文本内容。
4.  准备就绪后，点击右下角的“上传”按钮。系统会自动将您的文本内容包装成一个 `.txt` 文件，与其他文件一同上传。

![](imgs/2025-07-08-22-57-51.png)

---

## 2. 支持的文件类型与建议

### 完整格式列表

系统支持多种主流文件格式，能够覆盖绝大多数办公和学习场景。

| 类别 | 支持的扩展名 |
| :--- | :--- |
| **文档** | `.pdf`, `.docx`, `.txt`, `.md`, `.html` |
| **表格** | `.xlsx` |
| **演示文稿** | `.pptx` |
| **图片** | `.png`, `.jpg`, `.jpeg`, `.bmp`, `.heic`, `.tiff` |
| **数据格式** | `.json` |

### 最佳实践建议

![](imgs/2025-07-08-22-57-25.png)

为了让AI达到最佳的学习效果，我们推荐根据您的文档内容选择最合适的格式：

*   **追求最高文本质量**：对于Office格式（`.docx`, `.xlsx`, `.pptx`），系统能快速、准确地提取纯文本信息，且不易出错，但**无法提取**其中的图片。
*   **图文并茂的教程**：当文档中的图片与文字同等重要时（如操作步骤说明、产品手册），请务b>使用 PDF 格式**。系统可以提取PDF中的图片，并在AI回答时将其展示给用户。但请注意，PDF的处理速度会慢于Office文件。
*   **结构化纯文本**：对于纯文本、代码或有固定格式的内容，强烈建议使用 **Markdown (`.md`)** 格式。它结构清晰，最容易被AI准确理解。
*   **扫描件或图片**：对于扫描生成的PDF或包含大量文字的图片，请务必在高级设置中**开启 OCR 功能**。
*   **大型表格**：当文档包含大型、规范的表格时，请确保**开启“表格优化”**功能，并确保表头在第一行。

---

## 3. 高级配置参数详解

在上传窗口中，点击左下角的“高级设置”按钮，可以打开参数配置面板。这些参数决定了系统如何“阅读”和“消化”您的文档，合理配置能显著提升问答效果。

> **提示**：如果您不确定如何配置，保持默认设置通常是安全且有效的选择。

#### OCR
*   **适用文件**：此功能**仅对 PDF 文件生效**。
*   **作用**：这是一种“纯OCR”解析模式。它会忽略PDF中原有的文本层，强制对每一页进行图像识别来提取文字。
*   **优点**：对于扫描件（没有内嵌文本的图片型PDF），这是唯一有效的文本提取方式。对于某些字体嵌入有问题的PDF，它也可以作为备选方案，且解析速度相对较快。
*   **缺点**：此模式**无法提取**PDF中的任何图片或保留复杂的排版格式。

#### 强制使用大模型解析
*   **作用**：对于一些排版异常复杂的文档（如多栏混排的期刊论文、图文严重交错的设计手册），标准的解析程序可能难以准确提取文本。开启此选项会调用更强大的AI大模型进行深度解析，以追求最高的文本提取准确度。
*   **缺点**：处理速度会显著变慢，成本更高，并且此模式**无法提取**文档中的图片信息。请仅在标准解析效果不佳时尝试。

#### 自动切分 (Auto Split)
*   **作用**：系统默认会将一篇长文档智能地切分成多个更小的、逻辑相关的“知识块”，以便AI在回答问题时能更精确地定位到相关内容。
*   **重要提示**：请务必保持此选项开启。如果关闭，系统将**仅提取文档的前25页内容**，超出部分会被忽略。

#### 表格优化 (Unwrap Table)
*   **适用文件**：对所有类型的文档都有效，尤其适合处理`.xlsx`和`.docx`中的表格。
*   **作用**：开启后，系统会专门优化对文档中表格的识别。它会将一个二维表格“展开”为更适合AI检索的一维文本。例如，一个表格：
    ```
    | 水果   | 价格 | 重量 |
    | :---   | :--- | :--- |
    | 苹果   | 2    | 7    |
    | 香蕉   | 5    | 4    |
    ```
    会被转换为类似
    ```
    水果：苹果，价格：2，重量：7
    水果：香蕉，价格：5，重量：4
    ```
    的文本，让AI可以精确地查询“香蕉的重量”。
*   **重要限制**：此功能要求表格的**表头必须位于第一行**。如果表格没有表头，或表头在其他位置，开启此功能反而可能导致解析效果变差。

#### 知识块大小 (Chunk Size)
*   **作用**：这个参数定义了上面“自动切分”时，每个“知识块”的大致字数。它决定了AI在检索时单次“阅读”的上下文窗口有多大。
*   **如何调整**：
    *   **增大**：如果您的文档内容连贯性很强，且问答时常需要大段的上下文，可以适当增大此值。但这可能牺牲一些检索的精确度。
    *   **减小**：如果您的文档是由许多独立的知识点组成的，减小此值可以提升检索的精确性，但可能导致上下文不足。
*   **建议**：非专业用户建议使用默认值。

#### 知识块重叠 (Chunk Overlap)
*   **作用**：为了防止在知识块的切分处（例如一句话的中间）丢失关键信息，相邻的两个知识块之间会有一部分内容是重叠的。此参数定义了重叠部分的字数。
*   **建议**：此值通常是`知识块大小`的10%-25%，非专业用户建议使用默认值。

---

## 4. 上传后的处理流程

当您点击上传后，文档会经历一个标准化的处理流水线，您可以在上传列表或文档管理页看到它的状态变化：

1.  **等待中 (Pending)**：文档已进入处理队列，等待系统分配资源。
2.  **解析中 (Parsing)**：系统正在根据您的配置（如OCR）提取文档中的纯文本和元数据。
3.  **索引中 (Indexing)**：系统正在将解析后的文本进行切块、向量化，并存入可供AI检索的数据库中。
4.  **成功 (Success)**：处理完成！文档内容已可以被语料库问答和检索。
5.  **失败 (Failed)**：处理过程中出现错误。您可以尝试通过“编辑节点”->“重新索引”功能来重新处理该文档。

---

## 5. 总结与技巧

*   **从默认开始**：先使用系统默认的上传配置进行上传，然后在问答界面测试效果。只有当效果不理想时，再针对性地调整高级参数进行重新索引。
*   **检查解析内容**：上传成功后，可以在语料库的“管理界面”->“文档列表”中，点击“查看文档”或“编辑节点”，检查系统解析出的文本内容是否符合预期。这是排查问答效果不佳问题的重要步骤。
*   **化整为零**：对于一篇包含多种完全不同主题的超长文档，可以考虑手动将其拆分成几份独立的文档再上传，这样有助于提升检索的准确性。 